codetasty.revision.2.0
{"ts":1497452831,"restoring":false,"user_id":4599,"patch":[{"diffs":[[1,"<?php\n\nnamespace App\\Http\\Middleware;\n\nuse Closure;\n\nclass setLocale\n{\n    /**\n     * Handle an incoming request.\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n     * @param  \\Closure  $next\n     * @return mixed\n     */\n    public function handle($request, Closure $next)\n    {\n        if (Session::has('locale')) {\n            $locale = Session::get('locale', Config::get('app.locale'));\n        } else {\n            $locale = substr($request->server('HTTP_ACCEPT_LANGUAGE'), 0, 2);\n\n            if ($locale != 'fr' && $locale != 'en') {\n                $locale = 'en';\n            }\n        }\n\n        App::setLocale($locale);\n        \n        return $next($request);\n    }\n}\n"]],"start1":0,"start2":0,"length1":0,"length2":689}],"length":689}
{"ts":1497452839,"restoring":false,"user_id":4599,"patch":[{"diffs":[[0,"!= '"],[-1,"fr"],[1,"es"],[0,"' &&"]],"start1":520,"start2":520,"length1":10,"length2":10}],"length":689}
{"ts":1497452842,"restoring":false,"user_id":4599,"patch":[{"diffs":[[0,"ale = 'e"],[-1,"n"],[1,"s"],[0,"';\n     "]],"start1":570,"start2":570,"length1":17,"length2":17}],"length":689}
{"ts":1497453010,"restoring":false,"user_id":4599,"patch":[{"diffs":[[0,"\n\nclass "],[-1,"s"],[1,"S"],[0,"etLocale"]],"start1":51,"start2":51,"length1":17,"length2":17}],"length":689}
{"ts":1497453068,"restoring":false,"user_id":4599,"patch":[{"diffs":[[0,"Closure;"],[1,"\nuse Session;"],[0,"\n\nclass "]],"start1":43,"start2":43,"length1":16,"length2":29}],"length":702}
{"ts":1497453078,"restoring":false,"user_id":4599,"patch":[{"diffs":[[0,"Session;"],[1,"\nuse App;\nuse Config;"],[0,"\n\nclass "]],"start1":56,"start2":56,"length1":16,"length2":37}],"length":723}